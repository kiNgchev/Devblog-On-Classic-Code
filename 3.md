# PART 1
(–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –∫ –∫–æ–Ω—Ü—É –Ω–∞–ø–∏—Å–∞–Ω–∏—è —è –≤—ã—è—Å–Ω–∏–ª, —á—Ç–æ –≤ –¥—Å–æ–≤—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–µ—Å—å –ø–æ—Å—Ç –Ω–µ –ø–æ–º–µ—Å—Ç–∏—Ç—Å—è –∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤–æ—Ç —Ç–∞–∫ –≤–æ—Ç –∏–∑–≤—Ä–∞—â–∞—Ç—å—Å—è)
<@&1235989711194165299> –ü—Ä–∏–≤–µ—Ç, –º–æ–∏ –º–∞–ª–µ–Ω—å–∫–∏–µ –ª—é–±–∏—Ç–µ–ª–∏ –∫–æ–¥–æ–≤—ã—Ö –∏–∑–≤—Ä–∞—â–µ–Ω–∏–π

# –¢–∞–∫ —á–µ —Ç–∞–º —É –º–µ–Ω—è –∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏?
–ö–æ–º–º–∏—Ç–æ–º 2f65248 —è –¥–æ–±–∞–≤–∏–ª –Ω–µ–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –î–∞–ª–µ–µ —è –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à—É —á—Ç–æ, –∫–æ–≥–æ, –∑–∞—á–µ–º –∏ —Å —á–µ–º.

## –û–±—Ä–∏—Å—É—é –≤–∞–º –≤ –æ–±—â–µ–º –≤–∏–¥–µ
–ö–ª–∞—Å—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ - —ç—Ç–æ –∫–ª–∞—Å—Å –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è (–º–∞—Å–ª–æ –º–∞—Å–ª—è–Ω–æ–µ, —è –∑–Ω–∞—é) Spring –±–∏–Ω–æ–≤

–ù—É –¥–∞–≤–∞–π—Ç–µ –Ω–µ –±—É–¥–µ–º —É–≥–ª—É–±–ª—è—Ç—å—Å—è –≤ —Ç–µ–æ—Ä–∏—é, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞...

–õ–∞–¥–Ω–æ, –±—É–¥–µ–º, –Ω–æ —Ç–æ–ª—å–∫–æ —á—É—Ç—å-—á—É—Ç—å!

Spring bean - –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Spring Framework. –ï—Å–ª–∏ –í–∞–º –Ω–∞–¥–æ –±–æ–ª—å—à–µ - –∏–¥–∏—Ç–µ —á–∏—Ç–∞–π—Ç–µ —Å—Ç–∞—Ç—å–∏, —è –Ω–µ –±—É–¥—É –æ–ø–∏—Å—ã–≤–∞—Ç—å –≤–∞–º —Ç—É—Ç —Ç–æ, —á—Ç–æ –ª—é–¥–∏ –æ–ø–∏—Å—ã–≤–∞—é—Ç –≤ –¥–µ—Å—è—Ç–∫–∞—Ö —Å—Ç–∞—Ç–µ–π

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å –±–∏–Ω—ã –º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:
- xml
- yaml
- properties
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ Java-–∫–ª–∞—Å—Å–µ (—Ç–∞–∫–∏–µ –∫–ª–∞—Å—Å—ã –¥–æ–ª–∂–Ω—ã –æ–±–æ–∑–Ω–∞—á–∞—Ç—å—Å—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π @Configuration)

–ö–ª–∞—Å—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–∞–∫ —Ä–∞–∑-—Ç–∞–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç –±–∏–Ω—ã (—Ç–æ–ª—å–∫–æ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–∞–∑–∞—Ç—å —á—Ç–æ-—Ç–æ –ø—Ä–æ —Ç–∞–≤—Ç–æ–ª–æ–≥–∏—é) –Ω—É–∂–Ω—ã–º –Ω–∞–º –æ–±—Ä–∞–∑–æ–º, –∑–∞–µ–±–∏—Å—å –∫–æ—Ä–æ—á–µüëç

## CommonConfiguration –∏ CommonProperties
### CommonConfiguration
CommonConfiguration - —ç—Ç–æ –∫–ª–∞—Å—Å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π—Å—è –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ª–∏–±–æ –Ω–µ —Ç—Ä–µ–±—É—é—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞, –ª–∏–±–æ –Ω–µ –º–æ–≥—É—Ç –æ—Ç–Ω–µ—Å—Ç–∏—Å—å –∫ –∫–∞–∫–æ–º—É-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É. –¢–∞–∫–∏–º –º–æ–¥—É–ª–µ–º —è–≤–ª—è–µ—Ç—Å—è Liquibase:
```kotlin
    @Bean
    fun liquibase(): LiquibaseProperties {
        val props = LiquibaseProperties()
        //setting the path to changelog
        props.changeLog = "classpath:/db/changelog/db.changelog-master.yaml"
        return props
    }
```
–ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —ç—Ç–æ –≤—Å–µ –º–æ–¥—É–ª–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ¬Ø\_(„ÉÑ)_/¬Ø

–°–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–ª–∏, –¥–≤–∏–≥–∞–µ–º—Å—è –¥–∞–ª—å—à–µ ->

### CommonProperties
–í—Å–ø–æ–º–Ω–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é... –í–æ—Ç –ø–∏—à–∏—Ç–µ –≤—ã –∫–∞–∫—É—é-—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º—É, –∞ –í–∞–º –Ω–∞–¥–æ –º–Ω–æ–≥–æ –∫–∞–∫–∏—Ö-—Ç–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç —Å–æ–∑–¥–∞—Ç—å. –í—Å–ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –í—ã –¥–µ–ª–∞–ª–∏ –≤ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç? –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –í—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª–∏–∫, –Ω–∞–∑—ã–≤–∞–ª–∏ –µ–≥–æ –∫–∞–∫-–Ω–∏–±—É–¥—å –ø–æ —Ç–∏–ø—É config.json (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π). –ò–º–µ–Ω–Ω–æ —Ç–∞–∫–∏–º —Ñ–∞–π–ª–∏–∫–æ–º –∏ —è–≤–ª—è–µ—Ç—Å—è Properties.

Properties - —ç—Ç–æ –∫–ª–∞—Å—Å, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –≥–¥–µ-–ª–∏–±–æ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –û–±–ª–∞–¥–∞–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ —Ñ–∏—á–∞–º–∏, –Ω–æ —É –º–µ–Ω—è CommonProperties –ø—É—Å—Ç–æ–π, —Ç–∞–∫ —á—Ç–æ –Ω–µ –±—É–¥–µ—Ç –∑–∞–æ—Å—Ç—Ä—è—Ç—å –Ω–∞ –Ω–µ–º –Ω–∞—à–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –≤–ø–µ—Ä–µ–¥–∏ –º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ;)

## PersistenceConfiguration
PersistenceConfiguration - –∫–ª–∞—Å—Å, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Spring Data JPA. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –µ–≥–æ –ø–æ–±–ª–∏–∂–µ:
```kotlin
@Configuration
@EntityScan(basePackages = ["net.kingchev.core.persistence.entity"])
@EnableJpaRepositories(basePackages = ["net.kingchev.core.persistence.repository"])
@EnableTransactionManagement
class PersistenceConfiguration
//Maybe in the future I'll add anything in this config
```
–û–Ω —Ç–∞–∫–∂–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∏–Ω–æ–≤, —Ç—É—Ç –Ω–∞–¥–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏:
1. @EntityScan - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞–∫–µ—Ç –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –æ–±—ä–µ–∫—Ç —Å—É—â–Ω–æ—Å—Ç–µ–π
2. @EnableJpaRepositories - –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å JPA-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞–∫–µ—Ç –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –æ–±—ä–µ–∫—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
3. @EnableTransactionManagement - –≤–∫–ª—é—á–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
# PART 2
## KafkaConfiguration
FINALLY –ë–õ–Ø–¢–¨, –°–ê–ú–û–ï –ë–û–õ–¨–®–û–ï –ò –ò–ù–¢–ï–†–ï–°–ù–û–ï!!1!1!

–ü–æ—è—Å–Ω–µ–Ω–∏–µ: –î–ª—è —Å–≤—è–∑–∏ –±–æ—Ç–æ–≤ –∏ –±—ç–∫–µ–Ω–¥–∞ —è –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π Apache Kafka –ø–æ—Ç–æ–º—É —á—Ç–æ –º–æ–¥–Ω–æ, –º–æ–ª–æ–¥–µ–∂–Ω–æ –∏ –≤–æ–æ–±—â–µ [–¥–ª–∏–Ω–Ω–∞—è —Ç–∏—Ä–∞–¥–∞ –æ —Ç–æ–º, –ø–æ—á–µ–º—É —ç—Ç–æ –∫–ª–µ–≤–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è]
–ù–æ –°–ø—Ä–∏–Ω–≥ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–µ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç –Ω–∏ –∫–æ–Ω—Å—å—é–º–µ—Ä—ã, –Ω–∏ –ø—Ä–æ–¥—é—Å–µ—Ä—ã, –æ—Ç—Ç–æ–≥–æ –º—ã –¥–æ–ª–∂–Ω—ã —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å–∞–º–∏, —Ç–∞–∫ —á—Ç–æ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω:
```kotlin
@EnableKafka
@Configuration
class KafkaConfiguration(private val kafkaProperties: KafkaProperties) {
    init {
        kafkaProperties.bootstrapServers = listOf("localhost:29092")
        kafkaProperties.consumer.apply { consumer() }
        kafkaProperties.producer.apply { producer() }
        kafkaProperties.listener.apply { listener() }
    }

    companion object {
        private val consumer: KafkaProperties.Consumer.() -> Unit = {
            autoOffsetReset = "earliest"
            enableAutoCommit = false
            groupId = "akhs"
            clientId = "akhs"
            maxPollRecords = 1
            fetchMaxWait = Duration.ofMillis(36000)
            keyDeserializer = org.apache.kafka.common.serialization.StringSerializer::class.java
            valueDeserializer = org.apache.kafka.common.serialization.StringSerializer::class.java
        }

        private val producer: KafkaProperties.Producer.() -> Unit = {
            retries = 2
            clientId = "akhs"
            keySerializer = org.apache.kafka.common.serialization.StringSerializer::class.java
            valueSerializer = org.apache.kafka.common.serialization.StringSerializer::class.java
        }

        private val listener: KafkaProperties.Listener.() -> Unit = {
            ackMode = ContainerProperties.AckMode.MANUAL_IMMEDIATE
            concurrency = 1
            pollTimeout = Duration.ofMillis(1800000)
        }
    }
}
```
–ß—Ç–æ —Ç—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç? –ú—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º –±–∏–Ω—ã –∫–∞—Ñ–∫–∏, –≤–µ—Ä–Ω–æ)
–ê —Ç–µ–ø–µ—Ä—å —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ...
### –ë–ª–æ–∫ Init
–í –±–ª–æ–∫–µ init –º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ bootstrap-servers –¥–æ–±–∞–≤–ª—è—è —Ç—É–¥–∞ –ø–æ—Ä—Ç 29092, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —É –º–µ–Ω—è –≤—ã—Ö–æ–¥–∏—Ç –∫–∞—Ñ–∫–∞
—Å–ª–µ–¥—É—é—â–∏–º–∏ —à–∞–≥–∞–º–∏ –º—ã –ø—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫ Consumer, Producer, Listener
### –õ—è–º–±–¥—ã
–ò–∑–º–µ–Ω–µ–Ω–∏—è, –æ–±–æ–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –≤—ã—à–µ, –æ–ø–∏—Å–∞–Ω—ã –≤ –ª—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö. –°–∞–º–∏ –ª—è–º–±–¥—ã —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –≤ companion object
–ª—è–º–±–¥—ã consumer, producer, listener –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ Consumer, Producer, Listener –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ñ–∫–∏
–í –Ω–∏—Ö —è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é clientId –∏ groupId, —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã, –∫–ª–∞—Å—Å—ã –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –¥–µ—Å–µ—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π –∏ –∫–ª—é—á–µ–π, –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ.

# –ò–¢–û–ì!
–Ø –¥–æ–±–∞–≤–∏–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–º–æ—Ç—Ä–∏—Ç–µ, —â—É–ø–∞–π—Ç–µ, –∑–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã, –ø–æ–ø—Ä–∞–≤–ª—è–π—Ç–µ, –µ—Å–ª–∏ —è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ —á–µ–º-—Ç–æ —Ä–∞—Å—Å–∫–∞–∑–∞–ª, –≥–ª–∞–≤–Ω–æ–µ –Ω–µ –±–µ–π—Ç–µ ¬Ø\_(„ÉÑ)_/¬Ø